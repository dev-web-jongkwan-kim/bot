# SimpleTrueOB ì‹¤ì‹œê°„ ë§¤ë§¤ ì‹œìŠ¤í…œ ë¶„ì„

> ìµœì¢… ì—…ë°ì´íŠ¸: 2026-01-12

---

## ëª©ì°¨

1. [ì „ì²´ í”Œë¡œìš°](#1-ì „ì²´-í”Œë¡œìš°)
2. [Start ë²„íŠ¼ë¶€í„° ì‹¤ì‹œê°„ ë§¤ë§¤ê¹Œì§€](#2-start-ë²„íŠ¼ë¶€í„°-ì‹¤ì‹œê°„-ë§¤ë§¤ê¹Œì§€)
3. [ë§¤ìˆ˜ ì¡°ê±´ (Entry Conditions)](#3-ë§¤ìˆ˜-ì¡°ê±´-entry-conditions)
4. [ë§¤ë„ ì¡°ê±´ (Exit Conditions)](#4-ë§¤ë„-ì¡°ê±´-exit-conditions)
5. [í¬ì§€ì…˜ ê´€ë¦¬](#5-í¬ì§€ì…˜-ê´€ë¦¬)
6. [ë¦¬ìŠ¤í¬ ê´€ë¦¬](#6-ë¦¬ìŠ¤í¬-ê´€ë¦¬)
7. [ì£¼ìš” íŒŒì¼ ìœ„ì¹˜](#7-ì£¼ìš”-íŒŒì¼-ìœ„ì¹˜)
8. [í•µì‹¬ ìˆ˜ì¹˜ ìš”ì•½](#8-í•µì‹¬-ìˆ˜ì¹˜-ìš”ì•½)

---

## 1. ì „ì²´ í”Œë¡œìš°

### 1.1 ì•„í‚¤í…ì²˜

```
backend/src/
â”œâ”€â”€ trading-control/         # ë§¤ë§¤ ì‹œì‘/ì¢…ë£Œ ì œì–´
â”‚   â”œâ”€â”€ trading-control.service.ts     # ìƒíƒœ ê´€ë¦¬ (STOPPED/RUNNING)
â”‚   â””â”€â”€ trading-control.controller.ts  # API ì—”ë“œí¬ì¸íŠ¸
â”œâ”€â”€ strategies/              # ë§¤ë§¤ ì „ëµ ë¡œì§
â”‚   â”œâ”€â”€ simple-true-ob.strategy.ts     # í•µì‹¬ ë§¤ë§¤ ì „ëµ êµ¬í˜„
â”‚   â”œâ”€â”€ simple-true-ob.interface.ts    # ì „ëµ ì¸í„°í˜ì´ìŠ¤ ì •ì˜
â”‚   â””â”€â”€ order-block-history.service.ts # OB íˆìŠ¤í† ë¦¬ ê¸°ë¡
â”œâ”€â”€ signal/                  # ì‹ í˜¸ ìˆ˜ì‹  ë° ì²˜ë¦¬
â”‚   â”œâ”€â”€ strategy-runner.service.ts     # ì „ëµ ì‹¤í–‰ ë° ì‹ í˜¸ ìƒì„±
â”‚   â””â”€â”€ signal-processor.service.ts    # ì‹ í˜¸ í ì²˜ë¦¬
â”œâ”€â”€ order/                   # ì£¼ë¬¸ ì‹¤í–‰
â”‚   â””â”€â”€ order.service.ts               # ì£¼ë¬¸ ì²´ê²° ë¡œì§
â”œâ”€â”€ sync/                    # í¬ì§€ì…˜ ë™ê¸°í™”
â”‚   â””â”€â”€ position-sync.service.ts       # í¬ì§€ì…˜ ìƒíƒœ ë™ê¸°í™”
â”œâ”€â”€ risk/                    # ë¦¬ìŠ¤í¬ ê´€ë¦¬
â”‚   â””â”€â”€ risk.service.ts                # ìœ„í—˜ë„ ê³„ì‚° ë° í¬ì§€ì…˜ ì œí•œ
â”œâ”€â”€ symbol-selection/        # ë™ì  ì‹¬ë³¼ ì„ íƒ
â”‚   â””â”€â”€ symbol-selection.service.ts    # ê±°ë˜ëŸ‰ ê¸°ì¤€ ìƒìœ„ 170ê°œ ì„ íƒ
â”œâ”€â”€ binance/                 # ë°”ì´ë‚¸ìŠ¤ API í†µí•©
â”œâ”€â”€ websocket/               # ì‹¤ì‹œê°„ ìº”ë“¤ ë°ì´í„° ìˆ˜ì‹ 
â”‚   â”œâ”€â”€ websocket.service.ts           # WebSocket ì—°ê²° ê´€ë¦¬
â”‚   â””â”€â”€ candle-aggregator.service.ts   # ìº”ë“¤ ì§‘ê³„
â”œâ”€â”€ cache/                   # Redis ìºì‹œ
â””â”€â”€ database/                # í¬ì§€ì…˜/ì‹ í˜¸ ì €ì¥ì†Œ
```

### 1.2 ì„œë²„ ì‹œì‘ ì‹œ ìƒíƒœ

ì„œë²„ ì‹œì‘ ì‹œì—ëŠ” **ë§¤ë§¤ê°€ ìë™ìœ¼ë¡œ ì‹œì‘ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤**.

```
ì„œë²„ ì‹œì‘ (npm start)
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ê¸°ë³¸ ëª¨ë“ˆë§Œ ì´ˆê¸°í™” (Tradingì€ STOPPED ìƒíƒœ)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… NestJS ì•± ë¡œë“œ                                   â”‚
â”‚ âœ… API ì„œë²„ ì¤€ë¹„ (í¬íŠ¸ 3031)                         â”‚
â”‚ âœ… PostgreSQL ì—°ê²°                                  â”‚
â”‚ âœ… Redis ì—°ê²°                                       â”‚
â”‚ âœ… TradingControlService (ìƒíƒœ: STOPPED)            â”‚
â”‚ âŒ WebSocket ì—°ê²° (ëŒ€ê¸°)                            â”‚
â”‚ âŒ ì‹¬ë³¼ ì„ íƒ (ëŒ€ê¸°)                                 â”‚
â”‚ âŒ íˆìŠ¤í† ë¦¬ ë¡œë”© (ëŒ€ê¸°)                             â”‚
â”‚ âŒ ì „ëµ ì‹¤í–‰ (ëŒ€ê¸°)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
        Trading: STOPPED
        (Start ë²„íŠ¼ ëŒ€ê¸°)
```

### 1.3 ë°ì´í„° íë¦„ (Start ì´í›„)

```
[Start ë²„íŠ¼ í´ë¦­]
       â†“
[TradingControlService.start()]
       â†“
[AppService.startTrading()]
   â”œâ”€â”€ ì‹¬ë³¼ ì„ íƒ (170ê°œ)
   â””â”€â”€ WebSocket ì—°ê²° (6ê°œ ì»¤ë„¥ì…˜, 510 ìŠ¤íŠ¸ë¦¼)
       â†“
[StrategyRunnerService.startTrading()]
   â”œâ”€â”€ ì „ëµ ì´ˆê¸°í™”
   â””â”€â”€ íˆìŠ¤í† ë¦¬ ìº”ë“¤ ë¡œë”© (700ê°œ/ì‹¬ë³¼, ~3ë¶„)
       â†“
[ì‹¤ì‹œê°„ ë§¤ë§¤ ì‹œì‘]
       â†“
Binance WebSocket â†’ CandleAggregator â†’ SimpleTrueOB Strategy
â†’ Signal Processor â†’ Risk Service â†’ Order Service â†’ Position DB
â†’ Position Sync â†’ Binance API â†’ Executed Position
```

---

## 2. Start ë²„íŠ¼ë¶€í„° ì‹¤ì‹œê°„ ë§¤ë§¤ê¹Œì§€

### 2.1 Start ë²„íŠ¼ í´ë¦­ (í”„ë¡ íŠ¸ì—”ë“œ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend: TradingControlButton ì»´í¬ë„ŒíŠ¸                         â”‚
â”‚ ìœ„ì¹˜: ë©”ì¸í˜ì´ì§€ í—¤ë” / Live Trading íƒ­                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. ì‚¬ìš©ìê°€ "Start Trading" ë²„íŠ¼ í´ë¦­                           â”‚
â”‚ 2. confirm("Start live trading?") í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸               â”‚
â”‚ 3. POST /api/trading/start í˜¸ì¶œ                                 â”‚
â”‚ 4. ë²„íŠ¼ â†’ "Starting..." (ë¹„í™œì„±í™”)                              â”‚
â”‚ 5. ì™„ë£Œ í›„ ë²„íŠ¼ â†’ "Stop Trading" (ë¹¨ê°„ìƒ‰)                       â”‚
â”‚ 6. ìƒíƒœ ì¸ë””ì¼€ì´í„° â†’ ğŸŸ¢ Live Trading                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì½”ë“œ ìœ„ì¹˜:** `frontend/app/components/Dashboard/TradingControlButton.tsx`

### 2.2 TradingControlService.start() (ë°±ì—”ë“œ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend: TradingControlService                                   â”‚
â”‚ íŒŒì¼: trading-control/trading-control.service.ts                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ìƒíƒœ ë³€ê²½: STOPPED â†’ STARTING                                    â”‚
â”‚                                                                  â”‚
â”‚ 1. AppService.startTrading() í˜¸ì¶œ                               â”‚
â”‚    â””â”€â”€ ì‹¬ë³¼ ì„ íƒ + WebSocket ì—°ê²°                               â”‚
â”‚                                                                  â”‚
â”‚ 2. StrategyRunnerService.startTrading() í˜¸ì¶œ                    â”‚
â”‚    â””â”€â”€ ì „ëµ ì´ˆê¸°í™” + íˆìŠ¤í† ë¦¬ ë¡œë”©                              â”‚
â”‚                                                                  â”‚
â”‚ ìƒíƒœ ë³€ê²½: STARTING â†’ RUNNING                                    â”‚
â”‚ startedAt = new Date()                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì½”ë“œ ìœ„ì¹˜:** `backend/src/trading-control/trading-control.service.ts:72-110`

### 2.3 AppService.startTrading() - ì‹¬ë³¼ ì„ íƒ + WebSocket ì—°ê²°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 1: ì‹¬ë³¼ ì„ íƒ (SymbolSelectionService)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì†Œìš” ì‹œê°„: ~5ì´ˆ                                                  â”‚
â”‚                                                                  â”‚
â”‚ 1. ë°”ì´ë‚¸ìŠ¤ 24h í‹°ì»¤ ì¡°íšŒ (ëª¨ë“  USDT ì„ ë¬¼)                      â”‚
â”‚ 2. ìµœì†Œ ê±°ë˜ëŸ‰ í•„í„° ($1M ì´ìƒ)                                  â”‚
â”‚ 3. ìŠ¤í…Œì´ë¸”ì½”ì¸/ì¸ë±ìŠ¤ í† í° ì œì™¸                                â”‚
â”‚ 4. ê±°ë˜ëŸ‰ ìˆœ ì •ë ¬                                               â”‚
â”‚ 5. í•˜ì´ë¸Œë¦¬ë“œ ì„ íƒ:                                             â”‚
â”‚    - Core 5ê°œ: BTCUSDT, ETHUSDT, BNBUSDT, SOLUSDT, XRPUSDT     â”‚
â”‚    - Dynamic 165ê°œ: ê±°ë˜ëŸ‰ ìƒìœ„                                 â”‚
â”‚    - ì´ 170ê°œ ì‹¬ë³¼                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 2: WebSocket ì—°ê²° (WebSocketService)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì†Œìš” ì‹œê°„: ~1ì´ˆ                                                  â”‚
â”‚                                                                  â”‚
â”‚ ìŠ¤íŠ¸ë¦¼ êµ¬ì„±:                                                     â”‚
â”‚ - 170 ì‹¬ë³¼ Ã— 2 íƒ€ì„í”„ë ˆì„ (5m, 15m) = 340 kline ìŠ¤íŠ¸ë¦¼          â”‚
â”‚ - 170 ì‹¬ë³¼ Ã— 1 markPrice = 170 markPrice ìŠ¤íŠ¸ë¦¼                 â”‚
â”‚ - ì´ 510 ìŠ¤íŠ¸ë¦¼                                                  â”‚
â”‚                                                                  â”‚
â”‚ ì—°ê²° ë¶„ì‚°:                                                       â”‚
â”‚ - Binance ì œí•œ: 1024 ìŠ¤íŠ¸ë¦¼/ì—°ê²°                                â”‚
â”‚ - ì•ˆì „ ë§ˆì§„: 100 ìŠ¤íŠ¸ë¦¼/ì—°ê²°                                    â”‚
â”‚ - 510 / 100 = 6ê°œ WebSocket ì—°ê²°                                â”‚
â”‚                                                                  â”‚
â”‚ ì—°ê²° URL: wss://fstream.binance.com/stream?streams=...          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì½”ë“œ ìœ„ì¹˜:**
- `backend/src/app.service.ts:25-78`
- `backend/src/symbol-selection/symbol-selection.service.ts:233-259`
- `backend/src/websocket/websocket.service.ts:42-98`

### 2.4 StrategyRunnerService.startTrading() - ì „ëµ ì´ˆê¸°í™” + íˆìŠ¤í† ë¦¬ ë¡œë”©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 3: ì „ëµ ì´ˆê¸°í™”                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. SimpleTrueOBStrategy.reset()                                 â”‚
â”‚    - ëª¨ë“  ìƒíƒœ ë§µ ì´ˆê¸°í™”                                        â”‚
â”‚    - activeOBMap, candleBufferMap ë“±                            â”‚
â”‚                                                                  â”‚
â”‚ 2. CandleAggregatorServiceì— ì½œë°± ë“±ë¡                          â”‚
â”‚    - 'SIMPLE_TRUE_OB' â†’ onCandleClose()                         â”‚
â”‚    - ì‹¤ì‹œê°„ ìº”ë“¤ ì¢…ë£Œ ì´ë²¤íŠ¸ ìˆ˜ì‹  ì¤€ë¹„                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                         3ì´ˆ ëŒ€ê¸°
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 4: íˆìŠ¤í† ë¦¬ ìº”ë“¤ ë¡œë”©                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì†Œìš” ì‹œê°„: ~3ë¶„ (170 ì‹¬ë³¼)                                       â”‚
â”‚                                                                  â”‚
â”‚ í•„ìš” ìº”ë“¤ ìˆ˜: 700ê°œ/ì‹¬ë³¼/íƒ€ì„í”„ë ˆì„                              â”‚
â”‚ - SMA50 ê³„ì‚°: 600ê°œ (1ì‹œê°„ë´‰ = 600ê°œ 5ë¶„ë´‰)                     â”‚
â”‚ - ë²„í¼: 100ê°œ                                                   â”‚
â”‚                                                                  â”‚
â”‚ Rate Limit ê³„ì‚°:                                                â”‚
â”‚ - Binance Futures API: 2,400 weight/ë¶„                          â”‚
â”‚ - Klines (limit>500): 5 weight/ìš”ì²­                             â”‚
â”‚ - ë°°ì¹˜ë‹¹: 5 ì‹¬ë³¼ Ã— 2 íƒ€ì„í”„ë ˆì„ = 50 weight                     â”‚
â”‚ - ë°°ì¹˜ ê°„ê²©: 5ì´ˆ                                                â”‚
â”‚ - 170/5 = 34 ë°°ì¹˜ Ã— 5ì´ˆ = ~170ì´ˆ (~3ë¶„)                        â”‚
â”‚                                                                  â”‚
â”‚ ì§„í–‰ ìƒí™© ë¡œê¹…:                                                  â”‚
â”‚ [Batch 1/34] Loading 5 symbols...                               â”‚
â”‚ [Batch 2/34] Loading 5 symbols...                               â”‚
â”‚ ...                                                             â”‚
â”‚ [Batch 34/34] Loading 5 symbols...                              â”‚
â”‚                                                                  â”‚
â”‚ ê° ì‹¬ë³¼ë³„ ì²˜ë¦¬:                                                  â”‚
â”‚ - 5ë¶„ë´‰ 700ê°œ ë¡œë“œ â†’ ì „ëµì— ìˆœì°¨ ì£¼ì…                           â”‚
â”‚ - 15ë¶„ë´‰ 700ê°œ ë¡œë“œ â†’ ì „ëµì— ìˆœì°¨ ì£¼ì…                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 5: ì‹¤ì‹œê°„ ëª¨ë“œ í™œì„±í™”                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SimpleTrueOBStrategy.enableLiveMode()                           â”‚
â”‚ isLiveMode = true                                               â”‚
â”‚                                                                  â”‚
â”‚ ë¡œê·¸: ğŸŸ¢ Live mode ENABLED - signals will be logged and executedâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì½”ë“œ ìœ„ì¹˜:** `backend/src/signal/strategy-runner.service.ts:34-187`

### 2.5 ì‹¤ì‹œê°„ ìº”ë“¤ ìˆ˜ì‹  ë° ì „ëµ ì‹¤í–‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [FLOW-1] WebSocket â†’ ìº”ë“¤ ìˆ˜ì‹                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ WebSocket message ìˆ˜ì‹                                            â”‚
â”‚ - streamName: btcusdt@kline_5m                                  â”‚
â”‚ - klineData.x = true (ìº”ë“¤ ì¢…ë£Œ)                                â”‚
â”‚                                                                  â”‚
â”‚ ë¡œê·¸: [FLOW-1] WebSocket â†’ Candle | BTCUSDT 5m ğŸ“ˆ 0.15%         â”‚
â”‚       O:95000.00 C:95142.50 V:1234K                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [FLOW-2] CandleAggregator â†’ ìº”ë“¤ ì§‘ê³„ & Redis ì €ì¥              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. Redis ì €ì¥: candles:BTCUSDT:5m (ìµœê·¼ 50ê°œ)                   â”‚
â”‚ 2. ë“±ë¡ëœ ì „ëµ ì½œë°± í˜¸ì¶œ                                        â”‚
â”‚    â†’ StrategyRunnerService.onCandleClose()                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [FLOW-3] StrategyRunner â†’ SimpleTrueOB ì „ëµ ì‹¤í–‰                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. isRunning ì²´í¬ (falseë©´ ë¬´ì‹œ)                                â”‚
â”‚ 2. íƒ€ì„í”„ë ˆì„ë³„ ì „ëµ ì‹¤í–‰:                                      â”‚
â”‚    - 5m â†’ on5minCandleClose()                                   â”‚
â”‚    - 15m â†’ on15minCandleClose()                                 â”‚
â”‚                                                                  â”‚
â”‚ SimpleTrueOB ì „ëµ ì²˜ë¦¬:                                         â”‚
â”‚ 1. ìº”ë“¤ ë²„í¼ì— ì¶”ê°€                                             â”‚
â”‚ 2. OB ì—ì´ì§• ì²˜ë¦¬ (60ìº”ë“¤ ì´ˆê³¼ ë¬´íš¨í™”)                          â”‚
â”‚ 3. ORB ê°ì§€ (ATRÃ—1.5, ë³¼ë¥¨Ã—2.0, ëª¸í†µ 50%+)                     â”‚
â”‚ 4. OB í•„í„°ë§ (SMA50, íŠ¸ë Œë“œ, ì‹¤íŒ¨ OB)                          â”‚
â”‚ 5. ì§„ì… ì¡°ê±´ ì²´í¬ (Away, Retest, Reversal)                     â”‚
â”‚                                                                  â”‚
â”‚ ì‹ í˜¸ ìƒì„± ì‹œ ë¡œê·¸:                                               â”‚
â”‚ [FLOW-3] ğŸ¯ SIGNAL GENERATED | BTCUSDT 5m                       â”‚
â”‚   Direction: ğŸŸ¢ LONG                                            â”‚
â”‚   Entry:     95100.0000                                         â”‚
â”‚   Stop Loss: 94200.0000 (0.95% risk)                            â”‚
â”‚   TP1:       96180.0000 (80%)                                   â”‚
â”‚   TP2:       98700.0000 (20%)                                   â”‚
â”‚   R:R Ratio: 1:1.2                                              â”‚
â”‚   Method:    ORB                                                â”‚
â”‚   Score:     80/100                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [FLOW-4] SignalProcessor â†’ ì‹ í˜¸ í ê´€ë¦¬                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. TradingControlService.isRunning() ì²´í¬                       â”‚
â”‚    â†’ STOPPEDë©´ ì‹ í˜¸ ë¬´ì‹œ                                        â”‚
â”‚                                                                  â”‚
â”‚ 2. ì¤‘ë³µ ì²´í¬ (15ë¶„ ë‚´ ë™ì¼ ì‹¬ë³¼+ë°©í–¥)                           â”‚
â”‚    â†’ ì¤‘ë³µì´ë©´ SKIP                                              â”‚
â”‚                                                                  â”‚
â”‚ 3. DB ì €ì¥ (Signal í…Œì´ë¸”, status: PENDING)                     â”‚
â”‚                                                                  â”‚
â”‚ 4. WebSocket ë¸Œë¡œë“œìºìŠ¤íŠ¸ (í”„ë¡ íŠ¸ì—”ë“œ ì•Œë¦¼)                     â”‚
â”‚                                                                  â”‚
â”‚ 5. ì‹ í˜¸ íì— ì¶”ê°€ (ìµœëŒ€ 100ê°œ, FIFO)                            â”‚
â”‚                                                                  â”‚
â”‚ ë¡œê·¸: [FLOW-4] âœ… QUEUED | BTCUSDT LONG | Queue: 1/100          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [FLOW-5] Queue Worker â†’ ì‹ í˜¸ ì²˜ë¦¬ (1ì´ˆ ì£¼ê¸°)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ë¡œê·¸: [FLOW-4â†’5] ğŸ“¦ PROCESSING | BTCUSDT LONG | Queue: 0        â”‚
â”‚                                                                  â”‚
â”‚ 1. ì¤‘ë³µ ì²´í¬ (15ë¶„ ë‚´ ë™ì¼ ì‹ í˜¸)                                â”‚
â”‚ 2. ì£¼ë¬¸ ì²˜ë¦¬ ì¤‘ì¸ ì‹¬ë³¼ ìŠ¤í‚µ                                     â”‚
â”‚                                                                  â”‚
â”‚ RiskService ì²´í¬:                                               â”‚
â”‚ 3. âœ… Daily loss check (10% ì œí•œ)                               â”‚
â”‚ 4. âœ… Position limit check (ë¡±5/ìˆ5)                            â”‚
â”‚ 5. âœ… Symbol blacklist check (2íšŒ ì†ì‹¤ ê¸ˆì§€)                    â”‚
â”‚ 6. âœ… Correlation check (ìƒê´€ê´€ê³„ ì œí•œ)                         â”‚
â”‚ 7. âœ… Candle entry limit check (ë™ì‹œ 2ê°œ ì œí•œ)                  â”‚
â”‚                                                                  â”‚
â”‚ í¬ì§€ì…˜ í¬ê¸° ê³„ì‚°:                                                â”‚
â”‚ 8. ğŸ’° Position | Size: $150.00 | Margin: $15.00 | Leverage: 10x â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [FLOW-6] OrderService â†’ ë°”ì´ë‚¸ìŠ¤ ì£¼ë¬¸ ì‹¤í–‰                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ë¡œê·¸: [FLOW-6] OrderService â†’ ExecuteAsync | BTCUSDT LONG...    â”‚
â”‚                                                                  â”‚
â”‚ 1. ë ˆë²„ë¦¬ì§€ ì„¤ì • (5x ~ 15x, ATR% ê¸°ë°˜)                          â”‚
â”‚ 2. ë§ˆì§„ ëª¨ë“œ: ISOLATED                                          â”‚
â”‚                                                                  â”‚
â”‚ 3. LIMIT ì§„ì… ì£¼ë¬¸ ìƒì„±                                         â”‚
â”‚    - ê°€ê²©: OB ì¤‘ê°„ê°€ Â± ìŠ¬ë¦¬í”¼ì§€(0.02%)                          â”‚
â”‚    - ìˆ˜ëŸ‰: precision ì ìš©                                       â”‚
â”‚                                                                  â”‚
â”‚ 4. ì£¼ë¬¸ ëª¨ë‹ˆí„°ë§ (OrderMonitorService)                          â”‚
â”‚    - 2ì´ˆ ê°„ê²© ì²´ê²° í™•ì¸                                         â”‚
â”‚    - íƒ€ì„ì•„ì›ƒ: 5ë¶„ë´‰ 15ë¶„ / 15ë¶„ë´‰ 45ë¶„                         â”‚
â”‚    - OB ì˜ì—­ ì´íƒˆ ì‹œ ì·¨ì†Œ                                       â”‚
â”‚                                                                  â”‚
â”‚ 5. ì²´ê²° ì™„ë£Œ ì‹œ:                                                â”‚
â”‚    - ALGO SL ì£¼ë¬¸ ìƒì„± (STOP_MARKET)                            â”‚
â”‚    - ALGO TP ì£¼ë¬¸ ìƒì„± (TAKE_PROFIT_MARKET)                     â”‚
â”‚    - Position DB ì €ì¥                                           â”‚
â”‚                                                                  â”‚
â”‚ ë¡œê·¸:                                                            â”‚
â”‚ [FLOW-6] ğŸ“ ORDER PENDING | BTCUSDT LONG                        â”‚
â”‚   Order ID: 123456789                                           â”‚
â”‚   â†’ Monitoring for fill asynchronously                          â”‚
â”‚                                                                  â”‚
â”‚ ì²´ê²° í›„:                                                         â”‚
â”‚ [FLOW-6] âœ… FILLED | BTCUSDT LONG                               â”‚
â”‚   Entry: 95105.20 | Qty: 0.0015 | Notional: $143.16             â”‚
â”‚   SL: 94200.00 | TP1: 96180.00                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [FLOW-7] PositionSync â†’ í¬ì§€ì…˜ ë™ê¸°í™” (10ì´ˆ ì£¼ê¸°)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ë¡œê·¸: [FLOW-7] PositionSync â†’ Starting sync cycle...            â”‚
â”‚                                                                  â”‚
â”‚ 1. ë°”ì´ë‚¸ìŠ¤ ì˜¤í”ˆ í¬ì§€ì…˜ ì¡°íšŒ                                    â”‚
â”‚ 2. DB í¬ì§€ì…˜ê³¼ ë¹„êµ                                             â”‚
â”‚                                                                  â”‚
â”‚ 3. TP1 ì²´ê²° ê°ì§€:                                               â”‚
â”‚    - TP Algo Order ìƒíƒœ í™•ì¸                                    â”‚
â”‚    - FILLED â†’ SL ë³¸ì „ ì´ë™ (ì§„ì…ê°€ + 0.02%)                    â”‚
â”‚    ë¡œê·¸: [FLOW-7] ğŸ¯ TP1 HIT | BTCUSDT â†’ Moving SL to breakeven â”‚
â”‚                                                                  â”‚
â”‚ 4. ìµœëŒ€ ë³´ìœ ì‹œê°„ ì²´í¬:                                          â”‚
â”‚    - 5ë¶„ë´‰: 2ì‹œê°„ (120ë¶„)                                       â”‚
â”‚    - 15ë¶„ë´‰: 4ì‹œê°„ (240ë¶„)                                      â”‚
â”‚    - ì´ˆê³¼ ì‹œ ì‹œì¥ê°€ ê°•ì œ ì²­ì‚°                                   â”‚
â”‚    ë¡œê·¸: [FLOW-7] â° TIME EXIT | BTCUSDT - exceeded 120min      â”‚
â”‚                                                                  â”‚
â”‚ 5. ì²­ì‚° ì™„ë£Œ ì‹œ:                                                â”‚
â”‚    - ì‹¤ì œ PnL ê³„ì‚° (ìˆ˜ìˆ˜ë£Œ í¬í•¨)                                â”‚
â”‚    - Position status â†’ CLOSED                                   â”‚
â”‚    - ì²­ì‚° íƒ€ì… ê°ì§€ (SL/TP1/TP2/MANUAL)                        â”‚
â”‚    ë¡œê·¸: [FLOW-7] âœ… CLOSED | BTCUSDT LONG | PnL: +$2.15 (1.4%) â”‚
â”‚                                                                  â”‚
â”‚ 6. ê³¼ëŒ€ í¬ì§€ì…˜ ê°ì§€:                                            â”‚
â”‚    - ì´ ìë³¸ì˜ 10% ì´ˆê³¼ ì‹œ ê°•ì œ ì²­ì‚°                            â”‚
â”‚    ë¡œê·¸: [FLOW-7] âš ï¸ OVERSIZED | BTCUSDT - force closing        â”‚
â”‚                                                                  â”‚
â”‚ ë¡œê·¸: [FLOW-7] PositionSync â†’ Complete | Open: 3 | Synced: 3    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì½”ë“œ ìœ„ì¹˜:**
- WebSocket: `backend/src/websocket/websocket.service.ts:149-217`
- CandleAggregator: `backend/src/websocket/candle-aggregator.service.ts`
- StrategyRunner: `backend/src/signal/strategy-runner.service.ts:192-271`
- SignalProcessor: `backend/src/signal/signal-processor.service.ts:40-104`
- Queue Worker: `backend/src/signal/signal-processor.service.ts:134-296`
- OrderService: `backend/src/order/order.service.ts`
- PositionSync: `backend/src/sync/position-sync.service.ts`

### 2.6 Stop ë²„íŠ¼ í´ë¦­ ì‹œ í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stop ë²„íŠ¼ í´ë¦­                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. confirm("Stop live trading?") í™•ì¸                           â”‚
â”‚ 2. POST /api/trading/stop í˜¸ì¶œ                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TradingControlService.stop()                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ìƒíƒœ ë³€ê²½: RUNNING â†’ STOPPING                                    â”‚
â”‚                                                                  â”‚
â”‚ 1. StrategyRunnerService.stopTrading()                          â”‚
â”‚    - isRunning = false                                          â”‚
â”‚    - SimpleTrueOBStrategy.reset()                               â”‚
â”‚    - SimpleTrueOBStrategy.disableLiveMode()                     â”‚
â”‚    ë¡œê·¸: ğŸ”´ Live mode DISABLED                                  â”‚
â”‚                                                                  â”‚
â”‚ 2. AppService.stopTrading()                                     â”‚
â”‚    - WebSocketService.disconnectAll()                           â”‚
â”‚    - 6ê°œ WebSocket ì—°ê²° ì¢…ë£Œ                                    â”‚
â”‚    - ëª¨ë“  ìƒíƒœ ì´ˆê¸°í™”                                           â”‚
â”‚    ë¡œê·¸: All WebSocket connections closed                       â”‚
â”‚                                                                  â”‚
â”‚ ìƒíƒœ ë³€ê²½: STOPPING â†’ STOPPED                                    â”‚
â”‚ stoppedAt = new Date()                                          â”‚
â”‚ reason = "Manual stop from UI"                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ê²°ê³¼                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - ìƒˆë¡œìš´ ìº”ë“¤ ìˆ˜ì‹  ì¤‘ì§€                                         â”‚
â”‚ - ìƒˆë¡œìš´ ì‹ í˜¸ ìƒì„± ì¤‘ì§€                                         â”‚
â”‚ - ì‹ í˜¸ íì˜ ì‹ í˜¸ë„ ì²˜ë¦¬ ì•ˆí•¨ (isRunning ì²´í¬)                   â”‚
â”‚ - ê¸°ì¡´ ì˜¤í”ˆ í¬ì§€ì…˜ì€ ìœ ì§€ë¨ (ë°”ì´ë‚¸ìŠ¤ì—ì„œ ê´€ë¦¬)                 â”‚
â”‚ - SL/TP ì£¼ë¬¸ë„ ìœ ì§€ë¨                                           â”‚
â”‚ - PositionSyncëŠ” ê³„ì† ë™ì‘ (í¬ì§€ì…˜ ìƒíƒœ ì—…ë°ì´íŠ¸)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.7 ì „ì²´ íƒ€ì„ë¼ì¸ ìš”ì•½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Start ë²„íŠ¼ í´ë¦­ë¶€í„° ì‹¤ì‹œê°„ ë§¤ë§¤ê¹Œì§€ íƒ€ì„ë¼ì¸                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ T+0s     â”‚ Start ë²„íŠ¼ í´ë¦­                                      â”‚
â”‚ T+0.5s   â”‚ API í˜¸ì¶œ â†’ TradingControlService.start()             â”‚
â”‚ T+1s     â”‚ ìƒíƒœ: STARTING                                       â”‚
â”‚ T+1~5s   â”‚ ì‹¬ë³¼ ì„ íƒ (170ê°œ)                                    â”‚
â”‚ T+5~6s   â”‚ WebSocket ì—°ê²° (6ê°œ)                                 â”‚
â”‚ T+6s     â”‚ AppService ì™„ë£Œ                                      â”‚
â”‚ T+6~9s   â”‚ ì „ëµ ì´ˆê¸°í™” + 3ì´ˆ ëŒ€ê¸°                               â”‚
â”‚ T+9s     â”‚ íˆìŠ¤í† ë¦¬ ìº”ë“¤ ë¡œë”© ì‹œì‘                              â”‚
â”‚ T+9~180s â”‚ 34ë°°ì¹˜ Ã— 5ì´ˆ = ~170ì´ˆ (~3ë¶„)                         â”‚
â”‚ T+180s   â”‚ enableLiveMode() í˜¸ì¶œ                                â”‚
â”‚ T+180s   â”‚ ìƒíƒœ: RUNNING âœ…                                      â”‚
â”‚          â”‚                                                       â”‚
â”‚          â”‚ ì‹¤ì‹œê°„ ë§¤ë§¤ ì‹œì‘!                                     â”‚
â”‚          â”‚ 5ë¶„ë§ˆë‹¤: 170 ì‹¬ë³¼ ìº”ë“¤ ì¢…ë£Œ â†’ ì „ëµ ì‹¤í–‰ â†’ ì‹ í˜¸ ìƒì„± â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ ì´ ì†Œìš” ì‹œê°„: ~3ë¶„
          â”‚
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì‹¤ì‹œê°„ ë§¤ë§¤ ì¤‘                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - 170 ì‹¬ë³¼ ëª¨ë‹ˆí„°ë§                                             â”‚
â”‚ - 5ë¶„/15ë¶„ ìº”ë“¤ ì¢…ë£Œë§ˆë‹¤ ì „ëµ ì‹¤í–‰                              â”‚
â”‚ - ì‹ í˜¸ ë°œìƒ ì‹œ ë¦¬ìŠ¤í¬ ì²´í¬ í›„ ì£¼ë¬¸                              â”‚
â”‚ - 10ì´ˆë§ˆë‹¤ í¬ì§€ì…˜ ë™ê¸°í™”                                        â”‚
â”‚ - 5ì´ˆë§ˆë‹¤ í”„ë¡ íŠ¸ì—”ë“œ ìƒíƒœ í´ë§                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ë§¤ìˆ˜ ì¡°ê±´ (Entry Conditions)

### 3.1 ORB (Opening Range Breakout) ê°ì§€

**Bullish ORB (LONG):**
```
1. close > open (ì–‘ë´‰)
2. candleRange > ATR Ã— 1.5
3. volume > 50ê¸°ê°„ í‰ê·  Ã— 2.0
4. bodyRatio > 0.5 (ëª¸í†µì´ ì „ì²´ ë²”ìœ„ì˜ 50% ì´ìƒ)
```

**Bearish ORB (SHORT):**
```
ìœ„ì™€ ë™ì¼í•˜ì§€ë§Œ close < open (ìŒë´‰)
```

| íŒŒë¼ë¯¸í„° | ê°’ | ì„¤ëª… |
|---------|-----|------|
| `orbAtr` | 1.5 | ATR ë°°ìˆ˜ |
| `orbVol` | 2.0 | ë³¼ë¥¨ ë°°ìˆ˜ |
| `minBodyRatio` | 0.5 | ìµœì†Œ ëª¸í†µ ë¹„ìœ¨ |

> ì½”ë“œ ìœ„ì¹˜: `simple-true-ob.strategy.ts:836-869`

### 3.2 OB í•„í„°ë§

#### í•„í„° 1: OB í¬ê¸° ê²€ì¦
```
obSize >= ATR Ã— 0.5
```

#### í•„í„° 2: SMA50 íŠ¸ë Œë“œ í•„í„°

SMA50 = 1ì‹œê°„ë´‰ ê¸°ì¤€ = 600ê°œ 5ë¶„ë´‰

**LONG ì¡°ê±´:**
| ì¡°ê±´ | ê°’ |
|-----|-----|
| ê°€ê²© ìœ„ì¹˜ | close > SMA50 |
| ìµœì†Œ ê±°ë¦¬ | \|close - SMA50\| / SMA50 >= 0.02 (2%) |
| ë§ˆì¼“ ë ˆì§ | DOWNTRENDê°€ ì•„ë‹˜ |
| ìº”ë“¤ í™•ì¸ | ìµœê·¼ 20ë´‰ ì¤‘ 10ê°œ ì´ìƒ SMA50 ìœ„ |

**SHORT ì¡°ê±´:**
| ì¡°ê±´ | ê°’ |
|-----|-----|
| ê°€ê²© ìœ„ì¹˜ | close < SMA50 |
| ìµœì†Œ ê±°ë¦¬ | \|close - SMA50\| / SMA50 >= 0.02 (2%) |
| ë§ˆì¼“ ë ˆì§ | UPTRENDê°€ ì•„ë‹˜ |
| ìº”ë“¤ í™•ì¸ | ìµœê·¼ 20ë´‰ ì¤‘ 10ê°œ ì´ìƒ SMA50 ì•„ë˜ |

**ë§ˆì¼“ ë ˆì§ ê³„ì‚°:**
```
smaSlope = (currentSMA - sma20BarsAgo) / sma20BarsAgo

smaSlope > 0.02  â†’ UPTREND
smaSlope < -0.02 â†’ DOWNTREND
ê·¸ ì™¸           â†’ SIDEWAYS
```

#### í•„í„° 3: ì‹¤íŒ¨í•œ OB ì¬ì§„ì… ë°©ì§€
```
ìµœê·¼ 20ìº”ë“¤ ë‚´ ë™ì¼ ê°€ê²©ëŒ€(OB í¬ê¸°ì˜ 50% ì´ë‚´) ì‹¤íŒ¨ OBê°€ ì—†ì–´ì•¼ í•¨
```

> ì½”ë“œ ìœ„ì¹˜: `simple-true-ob.strategy.ts:474-595`

### 3.3 ë™ì  Away ì¡°ê±´ (ATR% ê¸°ë°˜)

```
atrPercent = (ATR / close) Ã— 100
```

| ATR% ë²”ìœ„ | minAwayMult | ì„¤ëª… |
|----------|-------------|------|
| < 1.0% | 0.2 | íš¡ë³´ì¥, ê°€ì¥ ë¯¼ê° |
| 1.0 ~ 2.0% | 0.8 | ë³´í†µ |
| > 2.0% | 2.0 | íŠ¸ë Œë”©, ê°€ì¥ ë³´ìˆ˜ì  |

**ì§„ì… ì¡°ê±´:**
```
minDist = obSize Ã— adjustedMinAwayMult

LONG:  close > obMid + minDist
SHORT: close < obMid - minDist
```

> ì½”ë“œ ìœ„ì¹˜: `simple-true-ob.strategy.ts:604-639`

### 3.4 ìµœì¢… ì§„ì… ì¡°ê±´

| ì¡°ê±´ | ê°’ | ì„¤ëª… |
|-----|-----|------|
| Retest | ìº”ë“¤ì´ OB ì¤‘ê°„ê°€ ë„ë‹¬ | `candleLow <= obMidpoint <= candleHigh` |
| Reversal | LONG=ì–‘ë´‰, SHORT=ìŒë´‰ | `requireReversal = true` |
| ê°€ê²© í¸ì°¨ | 2% ì´ë‚´ | `\|close - obMidpoint\| / obMidpoint <= 0.02` |
| ì£¼ë¬¸ ìœ íš¨ì‹œê°„ | 15ìº”ë“¤ | 5ë¶„ë´‰: 75ë¶„, 15ë¶„ë´‰: 225ë¶„ |
| ì¬ì§„ì… ì¿¨ë‹¤ìš´ | 12ìº”ë“¤ | 5ë¶„ë´‰: 1ì‹œê°„, 15ë¶„ë´‰: 3ì‹œê°„ |

**OB ì˜ì—­ ì´íƒˆ ì²´í¬:**
```
obZoneBuffer = obSize Ã— 0.5

LONG:  price < obBottom - obZoneBuffer â†’ OB ë¬´íš¨í™”
SHORT: price > obTop + obZoneBuffer â†’ OB ë¬´íš¨í™”
```

> ì½”ë“œ ìœ„ì¹˜: `simple-true-ob.strategy.ts:656-718`

### 3.5 ì§„ì…ê°€ ê³„ì‚°

```
slippage = 0.0002 (0.02%)

LONG:  entry = obMidpoint Ã— (1 + 0.0002)
SHORT: entry = obMidpoint Ã— (1 - 0.0002)
```

> ì½”ë“œ ìœ„ì¹˜: `simple-true-ob.strategy.ts:720-728`

---

## 4. ë§¤ë„ ì¡°ê±´ (Exit Conditions)

### 4.1 ì†ì ˆ (Stop Loss)

| í•­ëª© | ê°’ | ê³„ì‚°ì‹ |
|-----|-----|-------|
| SL ë²„í¼ | 1% | OB ê²½ê³„ì—ì„œ ì¶”ê°€ ì—¬ìœ  |
| LONG SL | - | `obBottom Ã— 0.99` |
| SHORT SL | - | `obTop Ã— 1.01` |

> ì½”ë“œ ìœ„ì¹˜: `simple-true-ob.strategy.ts:729-743`

### 4.2 ìµì ˆ (Take Profit)

**R:R ê¸°ë°˜ ê³„ì‚°:**
```
Risk (R) = |entry - stopLoss|

LONG:
  TP1 = entry + (R Ã— 1.2)
  TP2 = entry + (R Ã— 4.0)

SHORT:
  TP1 = entry - (R Ã— 1.2)
  TP2 = entry - (R Ã— 4.0)
```

| TP ë ˆë²¨ | R:R ë¹„ìœ¨ | ì²­ì‚° ë¹„ìœ¨ |
|--------|----------|----------|
| TP1 | 1.2R | 100% |
| TP2 | 4.0R | 0% (ë¯¸ì‚¬ìš©) |

**ì˜ˆì‹œ:**
```
ì§„ì…ê°€: $100
SL: $98 (Risk = $2)
TP1: $100 + ($2 Ã— 1.2) = $102.40
```

> ì½”ë“œ ìœ„ì¹˜: `simple-true-ob.strategy.ts:729-743`

### 4.3 TP1 ì²´ê²° í›„ SL ë³¸ì „ ì´ë™

```
TP1 ì²´ê²° ê°ì§€ ì‹œ (10ì´ˆ ì£¼ê¸° ë™ê¸°í™”):
â†’ SLì„ ì§„ì…ê°€ë¡œ ì´ë™

LONG:  ìƒˆ SL = entry + (entrySlippage Ã— 1.1) â‰ˆ +0.02% ìˆ˜ìµ
SHORT: ìƒˆ SL = entry - (entrySlippage Ã— 1.1) â‰ˆ +0.02% ìˆ˜ìµ
```

> ì½”ë“œ ìœ„ì¹˜: `position-sync.service.ts:70-72`

### 4.4 ìµœëŒ€ ë³´ìœ ì‹œê°„ ê°•ì œ ì²­ì‚°

| íƒ€ì„í”„ë ˆì„ | ìµœëŒ€ ë³´ìœ ì‹œê°„ | ì´ˆê³¼ ì‹œ |
|-----------|-------------|--------|
| 5ë¶„ë´‰ | 2ì‹œê°„ (120ë¶„) | ì‹œì¥ê°€ ì²­ì‚° |
| 15ë¶„ë´‰ | 4ì‹œê°„ (240ë¶„) | ì‹œì¥ê°€ ì²­ì‚° |

> ì½”ë“œ ìœ„ì¹˜: `position-sync.service.ts:23-27`

---

## 5. í¬ì§€ì…˜ ê´€ë¦¬

### 5.1 í¬ì§€ì…˜ í¬ê¸° ê³„ì‚°

```typescript
capital = accountBalance (ê¸°ë³¸: $10,000)

if (capital < 1000) {
    margin = 15  // ìµœì†Œ ë§ˆì§„ $15
} else {
    margin = capital Ã— capitalUsage (10%)
    if (margin < 15) margin = 15
}

// ë¦¬ìŠ¤í¬ ê´€ë¦¬ ì ìš©
margin = margin Ã— positionSizeMultiplier
if (margin < 15) margin = 15

// í¬ì§€ì…˜ í¬ê¸°
positionValue = margin Ã— leverage
positionSize = positionValue / entryPrice
```

### 5.2 ë™ì  ë ˆë²„ë¦¬ì§€ (ATR% ê¸°ë°˜)

```
atrPercent = (ATR / close) Ã— 100
```

| ATR% ë²”ìœ„ | ë ˆë²„ë¦¬ì§€ | ì„¤ëª… |
|----------|---------|------|
| < 1.5% | 15x | ë‚®ì€ ë³€ë™ì„±, ê³µê²©ì  |
| 1.5 ~ 3.0% | 10x | ë³´í†µ ë³€ë™ì„± |
| > 3.0% | 5x | ë†’ì€ ë³€ë™ì„±, ë°©ì–´ì  |

> ì½”ë“œ ìœ„ì¹˜: `simple-true-ob.strategy.ts:751-773`

### 5.3 ì£¼ë¬¸ ì‹¤í–‰ ë¡œì§

**ì£¼ë¬¸ íƒ€ì…:** MAKER (ì§€ì •ê°€ë§Œ ì‚¬ìš©)

| ë‹¨ê³„ | ë‚´ìš© |
|-----|------|
| 1 | ë ˆë²„ë¦¬ì§€ ì„¤ì • (5x ~ 15x) |
| 2 | ë§ˆì§„ ëª¨ë“œ: ISOLATED |
| 3 | ì§„ì…: LIMIT ì£¼ë¬¸ (OB ì¤‘ê°„ê°€) |
| 4 | SL: ALGO ORDER (closePosition=true) |
| 5 | TP: ALGO ORDER (TAKE_PROFIT_MARKET) |

**ì£¼ë¬¸ íƒ€ì„ì•„ì›ƒ:**
```
5ë¶„ë´‰:  15ë¶„ (900ì´ˆ)
15ë¶„ë´‰: 45ë¶„ (2700ì´ˆ)
```

**ì£¼ë¬¸ ìœ íš¨ì„± ê²€ì¦:**
```
- ìµœì†Œ Notional: $5 (Binance ìµœì†Œ)
- ì•ˆì „ë§ˆì§„: $10 ì´ìƒ
- ìˆ˜ëŸ‰/ê°€ê²©: ì‹¬ë³¼ë³„ precision/tickSize
```

> ì½”ë“œ ìœ„ì¹˜: `order.service.ts:222-470`

### 5.4 ì£¼ë¬¸ ëª¨ë‹ˆí„°ë§ (2ì´ˆ ê°„ê²©)

```
while (Date.now() - startTime < maxWaitTime):
    1. ì£¼ë¬¸ ìƒíƒœ í™•ì¸
       - FILLED: ì²´ê²° ì™„ë£Œ
       - CANCELED/EXPIRED: ì·¨ì†Œë¨

    2. OB ì˜ì—­ ì´íƒˆ ì²´í¬
       - LONG:  price < obBottom - (obSize Ã— 0.5) â†’ ì·¨ì†Œ
       - SHORT: price > obTop + (obSize Ã— 0.5) â†’ ì·¨ì†Œ

    3. íƒ€ì„ì•„ì›ƒ â†’ ì·¨ì†Œ
```

> ì½”ë“œ ìœ„ì¹˜: `order.service.ts:338-426`

### 5.5 SL/TP ìŠ¬ë¦¬í”¼ì§€ ë³´ì •

```
ì‹¤ì œ ì²´ê²°ê°€ â‰  ê³„íš ì§„ì…ê°€ì¸ ê²½ìš°:

entrySlippageAmount = actualEntry - plannedEntry

actualSL = plannedSL + entrySlippageAmount
actualTP1 = plannedTP1 + entrySlippageAmount
actualTP2 = plannedTP2 + entrySlippageAmount
```

> ì½”ë“œ ìœ„ì¹˜: `order.service.ts:478-529`

---

## 6. ë¦¬ìŠ¤í¬ ê´€ë¦¬

### 6.1 í¬ì§€ì…˜ ì œí•œ

| ì„¤ì • | ê°’ |
|-----|-----|
| ìµœëŒ€ ë™ì‹œ í¬ì§€ì…˜ | 10ê°œ |
| ìµœëŒ€ ë¡± í¬ì§€ì…˜ | 5ê°œ |
| ìµœëŒ€ ìˆ í¬ì§€ì…˜ | 5ê°œ |

### 6.2 ì¼ì¼ ì†ì‹¤ ì œí•œ

```
DAILY_LOSS_LIMIT = 10%

ë‹¹ì¼ ëˆ„ì  ì†ì‹¤ > ì´ˆê¸°ìë³¸ Ã— 10% â†’ ëª¨ë“  ì‹ í˜¸ ê±°ì ˆ
```

### 6.3 ì‹¬ë³¼ ë¸”ë™ë¦¬ìŠ¤íŠ¸ (v13)

```
MAX_DAILY_SYMBOL_LOSSES = 2

ë™ì¼ ì‹¬ë³¼ 2íšŒ ì´ìƒ ì†ì‹¤ â†’ ë‹¹ì¼ ì§„ì… ê¸ˆì§€
```

### 6.4 ìº”ë“¤ ê¸°ë°˜ ë™ì‹œ ì§„ì… ì œí•œ

```
MAX_SAME_DIRECTION_PER_CANDLE = 2

ë™ì¼ ìº”ë“¤(5ë¶„/15ë¶„) ì¢…ë£Œ ì‹œì ì— ê°™ì€ ë°©í–¥ ìµœëŒ€ 2ê°œ ì£¼ë¬¸
â†’ ìƒê´€ê´€ê³„ ë†’ì€ ì¢…ëª© ë™ì‹œ ì§„ì… ë°©ì§€
```

### 6.5 ì—°ì† ì†ì‹¤ ì‹œ í¬ì§€ì…˜ ì¶•ì†Œ

| ì—°ì† ì†ì‹¤ íšŸìˆ˜ | í¬ì§€ì…˜ í¬ê¸° |
|--------------|-----------|
| 5íšŒ ì´ìƒ | 50% |
| 10íšŒ ì´ìƒ | 25% |
| ì—°ì† ìŠ¹ë¦¬ 3íšŒ | 100% (ë³µêµ¬) |

### 6.6 ê³¼ëŒ€ í¬ì§€ì…˜ ê°•ì œ ì²­ì‚°

```
MAX_POSITION_VALUE_PERCENT = 0.10 (10%)

í¬ì§€ì…˜ ê°€ì¹˜ > ì´ ìë³¸ Ã— 10% â†’ ì‹œì¥ê°€ ê°•ì œ ì²­ì‚°
```

### 6.7 í¬ì§€ì…˜ ë™ê¸°í™” (10ì´ˆ ì£¼ê¸°)

```
1. ë°”ì´ë‚¸ìŠ¤ ì˜¤í”ˆ í¬ì§€ì…˜ ì¡°íšŒ
2. DB í¬ì§€ì…˜ê³¼ ë¹„êµ
3. TP1 ì²´ê²° ê°ì§€ â†’ SL ë³¸ì „ ì´ë™
4. ìµœëŒ€ ë³´ìœ ì‹œê°„ ì´ˆê³¼ â†’ ê°•ì œ ì²­ì‚°
5. DBì—ë§Œ ìˆëŠ” í¬ì§€ì…˜ â†’ CLOSED ì²˜ë¦¬
6. ë°”ì´ë‚¸ìŠ¤ì—ë§Œ ìˆëŠ” í¬ì§€ì…˜ â†’ MANUAL ìƒì„±
```

### 6.8 ì²­ì‚° íƒ€ì… ìë™ ê°ì§€

```
ì‹¤ì œ ì²­ì‚°ê°€ì™€ ê³„íšëœ ëª©í‘œê°€ ê±°ë¦¬ ë¹„êµ (5% ì˜¤ì°¨ í—ˆìš©):
- SLì— ê°€ì¥ ê°€ê¹Œì›€  â†’ 'SL'
- TP1ì— ê°€ì¥ ê°€ê¹Œì›€ â†’ 'TP1'
- TP2ì— ê°€ì¥ ê°€ê¹Œì›€ â†’ 'TP2'
- ëª¨ë‘ ë©€ë©´        â†’ 'MANUAL'
```

### 6.9 ìˆ˜ìˆ˜ë£Œ ê³„ì‚°

```
ì§„ì… ìˆ˜ìˆ˜ë£Œ = entryPrice Ã— quantity Ã— 0.0004 (0.04%)
ì²­ì‚° ìˆ˜ìˆ˜ë£Œ = ë°”ì´ë‚¸ìŠ¤ ì‹¤ì œ ìˆ˜ìˆ˜ë£Œ í•©ì‚°

ìˆœ PnL = ë°”ì´ë‚¸ìŠ¤ ì†ìµ - ì´ ìˆ˜ìˆ˜ë£Œ
```

> ì½”ë“œ ìœ„ì¹˜: `position-sync.service.ts:52-420`

---

## 7. ì£¼ìš” íŒŒì¼ ìœ„ì¹˜

| ê¸°ëŠ¥ | íŒŒì¼ ê²½ë¡œ |
|-----|----------|
| ë§¤ë§¤ ì œì–´ ì„œë¹„ìŠ¤ | `backend/src/trading-control/trading-control.service.ts` |
| ë§¤ë§¤ ì œì–´ API | `backend/src/trading-control/trading-control.controller.ts` |
| ì•± ì„œë¹„ìŠ¤ (ì‹œì‘/ì¢…ë£Œ) | `backend/src/app.service.ts` |
| í•µì‹¬ ì „ëµ ë¡œì§ | `backend/src/strategies/simple-true-ob.strategy.ts` |
| ì „ëµ ì¸í„°í˜ì´ìŠ¤ | `backend/src/strategies/simple-true-ob.interface.ts` |
| ì „ëµ ì‹¤í–‰ | `backend/src/signal/strategy-runner.service.ts` |
| ì‹ í˜¸ ì²˜ë¦¬ | `backend/src/signal/signal-processor.service.ts` |
| ì£¼ë¬¸ ì‹¤í–‰ | `backend/src/order/order.service.ts` |
| í¬ì§€ì…˜ ë™ê¸°í™” | `backend/src/sync/position-sync.service.ts` |
| ë¦¬ìŠ¤í¬ ê´€ë¦¬ | `backend/src/risk/risk.service.ts` |
| ì‹¬ë³¼ ì„ íƒ | `backend/src/symbol-selection/symbol-selection.service.ts` |
| WebSocket ê´€ë¦¬ | `backend/src/websocket/websocket.service.ts` |
| ìº”ë“¤ ì§‘ê³„ | `backend/src/websocket/candle-aggregator.service.ts` |
| í”„ë¡ íŠ¸ì—”ë“œ ë²„íŠ¼ | `frontend/app/components/Dashboard/TradingControlButton.tsx` |
| í”„ë¡ íŠ¸ì—”ë“œ API | `frontend/app/lib/api.ts` |

---

## 8. í•µì‹¬ ìˆ˜ì¹˜ ìš”ì•½

### 8.1 ì „ëµ ì„¤ì •ê°’

| ì„¤ì •í•­ëª© | ê°’ | ì„¤ëª… |
|---------|-----|------|
| lookback | 2 | OB ê°ì§€ìš© íšŒê·€ ê¸°ê°„ |
| minBodyRatio | 0.5 | ë´‰ ëª¸í†µ ìµœì†Œ ë¹„ìœ¨ (50%) |
| useBodyOnly | true | ORBëŠ” ëª¸í†µë§Œ ì‚¬ìš© |
| requireReversal | true | ì§„ì… ìº”ë“¤ ì—­ë°©í–¥ í•„ìš” |
| orbAtr | 1.5 | ORB ê°ì§€ ATRë°°ìˆ˜ |
| orbVol | 2.0 | ORB ê°ì§€ ë³¼ë¥¨ë°°ìˆ˜ |
| rrRatio | 4.0 | TP2ì˜ R:R ë¹„ìœ¨ |
| obMaxBars | 60 | OB ìµœëŒ€ ìœ ì§€ ìº”ë“¤ |
| capitalUsage | 0.1 | ê±°ë˜ë‹¹ ìë³¸ ì‚¬ìš© (10%) |
| slippage | 0.0002 | ìŠ¬ë¦¬í”¼ì§€ (0.02%) |
| maxHoldingBars | 48 | ìµœëŒ€ ë³´ìœ  ìº”ë“¤ (4ì‹œê°„) |
| minAwayMultRangebound | 0.2 | ATR% < 1.0 |
| minAwayMultNormal | 0.8 | ATR% 1.0-2.0 |
| minAwayMultTrending | 2.0 | ATR% > 2.0 |
| maxPriceDeviation | 0.02 | ê°€ê²© í¸ì°¨ ì œí•œ (2%) |
| orderValidityBars5m | 15 | 5ë¶„ë´‰ ì£¼ë¬¸ ìœ íš¨ì‹œê°„ |
| orderValidityBars15m | 15 | 15ë¶„ë´‰ ì£¼ë¬¸ ìœ íš¨ì‹œê°„ |
| useDynamicLeverage | true | ATR% ê¸°ë°˜ ë™ì  ë ˆë²„ë¦¬ì§€ |

### 8.2 í•œëˆˆì— ë³´ëŠ” ìš”ì•½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ì‹œì‘/ì¢…ë£Œ ì œì–´                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì„œë²„ ì‹œì‘:   ìë™ ë§¤ë§¤ ì•ˆí•¨ (STOPPED ìƒíƒœ)                       â”‚
â”‚ Start ë²„íŠ¼: ì‹¬ë³¼ ì„ íƒ â†’ WebSocket â†’ íˆìŠ¤í† ë¦¬ â†’ ì‹¤ì‹œê°„ (~3ë¶„)    â”‚
â”‚ Stop ë²„íŠ¼:  WebSocket í•´ì œ â†’ ì „ëµ ì¤‘ì§€ (í¬ì§€ì…˜ ìœ ì§€)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    ì§„ì… ì¡°ê±´ (Entry)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ORB ê°ì§€:     ATR Ã— 1.5 | ë³¼ë¥¨ Ã— 2.0 | ëª¸í†µ 50%+                â”‚
â”‚ íŠ¸ë Œë“œ í•„í„°:  SMA50 ëŒ€ë¹„ 2% ì´ìƒ ê±°ë¦¬                            â”‚
â”‚ Away ì¡°ê±´:   íš¡ë³´ì¥ 0.2 | ë³´í†µ 0.8 | íŠ¸ë Œë”© 2.0                 â”‚
â”‚ ì¬ì§„ì… ì¿¨ë‹¤ìš´: 12ìº”ë“¤                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    ì²­ì‚° ì¡°ê±´ (Exit)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TP1:         1.2R (100% ì²­ì‚°)                                   â”‚
â”‚ SL:          OB ê²½ê³„ Â± 1%                                        â”‚
â”‚ ìµœëŒ€ ë³´ìœ :   5ë¶„ë´‰ 2ì‹œê°„ | 15ë¶„ë´‰ 4ì‹œê°„                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    í¬ì§€ì…˜ ê´€ë¦¬                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ë ˆë²„ë¦¬ì§€:    5x ~ 15x (ATR% ê¸°ë°˜ ë™ì )                           â”‚
â”‚ ìë³¸ ì‚¬ìš©:   10%                                                 â”‚
â”‚ ìŠ¬ë¦¬í”¼ì§€:    0.02%                                               â”‚
â”‚ ìµœëŒ€ í¬ì§€ì…˜: 10ê°œ (ë¡±5 / ìˆ5)                                    â”‚
â”‚ ì¼ì¼ ì†ì‹¤:   10% ì œí•œ                                            â”‚
â”‚ ì‹¬ë³¼ ë¸”ë™:   2íšŒ ì†ì‹¤ ì‹œ ë‹¹ì¼ ê¸ˆì§€                               â”‚
â”‚ ë™ì‹œ ì§„ì…:   ê°™ì€ ìº”ë“¤ ì¢…ë£Œ ì‹œ ê°™ì€ ë°©í–¥ ìµœëŒ€ 2ê°œ                â”‚
â”‚ ê³¼ëŒ€ í¬ì§€ì…˜: ì´ ìë³¸ 10% ì´ˆê³¼ ì‹œ ê°•ì œ ì²­ì‚°                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. ìµœì í™” ì´ë ¥

| ë²„ì „ | ë³€ê²½ì‚¬í•­ |
|-----|---------|
| v4 | RR Ratio 4.0, TP1 Ratio 1.2, TP 100% ë‹¨ì¼ ì²­ì‚° |
| v5 | ë ˆë²„ë¦¬ì§€ 15x, ìµœëŒ€ë³´ìœ  48ìº”ë“¤ (4ì‹œê°„) |
| v6 | ê°€ê²© í¸ì°¨ 2% ì²´í¬, ì£¼ë¬¸ ìœ íš¨ì‹œê°„ 15ìº”ë“¤ |
| v7 | ATR% ê¸°ë°˜ ë™ì  ë ˆë²„ë¦¬ì§€ (15x/10x/5x) |
| v8 | ì¬ì§„ì… ì¿¨ë‹¤ìš´ 12ìº”ë“¤ ì¶”ê°€ |
| v9 | TP1 Ratio 1.0 (ìŠ¹ë¥  57%, MDD 22.5%) |
| v10 | ë™ì  ì”ì•¡ ê¸°ë°˜ ë³µë¦¬ ì¬íˆ¬ì |
| v13 | ì¼ì¼ ì‹¬ë³¼ ë¸”ë™ë¦¬ìŠ¤íŠ¸ (2íšŒ ì†ì‹¤ ê¸ˆì§€) |
| v14/v15 | ìµœëŒ€ ë³´ìœ ì‹œê°„ ê°•ì œ ì²­ì‚° (5m: 2ì‹œê°„, 15m: 4ì‹œê°„) |
| v16 | Start/Stop ë²„íŠ¼ ì¶”ê°€, ì„œë²„ ì‹œì‘ ì‹œ ìë™ ë§¤ë§¤ ì•ˆí•¨ |
| v17 | ìº”ë“¤ ê¸°ë°˜ ë™ì‹œ ì§„ì… ì œí•œ (ê°™ì€ ë°©í–¥ 2ê°œ) |
| v18 | ê³¼ëŒ€ í¬ì§€ì…˜ 10% ê¸°ì¤€ ê°•ì œ ì²­ì‚° |

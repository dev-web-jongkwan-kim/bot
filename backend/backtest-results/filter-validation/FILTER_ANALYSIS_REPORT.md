# 필터 검증 백테스트 분석 보고서

## 테스트 개요

| 항목 | 내용 |
|------|------|
| **테스트 기간** | 2025년 1월 ~ 11월 (11개월) |
| **심볼 수** | 50개 (주요 코인 포함) |
| **타임프레임** | 5분봉 |
| **데이터 소스** | data.binance.vision (월별 CSV) |
| **캔들 수** | 심볼당 ~96,192개 |

### 테스트 필터

1. **BOS (Break of Structure)**: 스윙 고점/저점 돌파 확인
2. **Liquidity Sweep**: 유동성 스윕 후 반전 확인
3. **EMA 정배열/역배열**: EMA 8/21/55 정렬 상태 확인
4. **FVG (Fair Value Gap)**: OB 근처 가격 갭 존재 확인

---

## 핵심 결과 요약

### 승률 기준 순위

| 순위 | 필터 조합 | 거래 수 | 승률 | 총 PnL | 평균 PnL |
|------|----------|--------|------|--------|---------|
| 1 | **Baseline (필터 없음)** | 14,783 | **53.8%** | +57,083% | +3.86% |
| 2 | BOS Only | 1,718 | 53.0% | +6,130% | +3.57% |
| 3 | FVG Only | 1,671 | 52.8% | +5,882% | +3.52% |
| 4 | BOS + FVG | 176 | 50.6% | +300% | +1.70% |
| 5 | Liquidity Sweep Only | 1,834 | 49.5% | +2,928% | +1.60% |
| ... | ... | ... | ... | ... | ... |
| 9 | **EMA Only** | 7,457 | **25.0%** | -69,401% | -9.31% |
| 16 | **All Filters** | 8 | **12.5%** | -179% | -22.36% |

---

## 주요 발견사항

### 1. EMA 필터의 역효과

**가장 충격적인 발견: EMA 정배열/역배열 필터가 성과를 크게 악화시킴**

| 필터 | 승률 변화 | 분석 |
|------|----------|------|
| EMA Only | **-28.7%p** (53.8% → 25.0%) | 심각한 역효과 |
| BOS + EMA | -31.1%p | EMA 추가 시 악화 |
| Liquidity Sweep + EMA | -35.5%p | EMA 추가 시 악화 |

**원인 분석:**
- 2025년 암호화폐 시장은 횡보(Sideways) 구간이 많았음
- 정배열/역배열이 확인될 때는 이미 추세의 끝자락인 경우가 많음
- 엄격한 EMA 정렬 조건이 좋은 진입 기회를 필터링해버림

### 2. BOS, FVG 필터의 미미한 효과

| 필터 | 승률 변화 | 거래 감소율 | 분석 |
|------|----------|------------|------|
| BOS Only | -0.8%p | 88.4% | 거래 기회만 줄어들고 승률 개선 없음 |
| FVG Only | -1.0%p | 88.7% | 동일 |
| BOS + FVG | -3.2%p | 98.8% | 거의 모든 거래가 필터링됨 |

**의미:**
- BOS와 FVG 조건이 **너무 엄격**하거나
- 현재 OB 감지 로직이 이미 충분히 효과적이어서 추가 필터가 불필요

### 3. Liquidity Sweep 필터의 약간의 부정적 영향

| 필터 | 승률 | 분석 |
|------|------|------|
| Baseline | 53.8% | - |
| Liquidity Sweep Only | 49.5% | **-4.3%p 감소** |

**원인 추정:**
- 유동성 스윕 감지 로직이 실제 스마트머니 유동성 수집을 정확히 포착하지 못함
- 단순 wick 분석만으로는 진정한 유동성 스윕을 구분하기 어려움

---

## 필터별 상세 분석

### BOS (Break of Structure)

```
조건: 최근 20캔들 내 이전 스윙 고점/저점을 돌파한 적이 있는가?
```

**결과:**
- 승률: 53.0% (Baseline 대비 -0.8%p)
- 거래 수: 14,783 → 1,718 (**88.4% 감소**)

**해석:**
- BOS 조건이 너무 엄격해서 대부분의 유효한 OB도 필터링
- 승률 개선 효과 없이 기회만 줄어듦

### Liquidity Sweep

```
조건: OB 형성 전 이전 스윙 포인트 아래(LONG)/위(SHORT)로 wick 후 반전
```

**결과:**
- 승률: 49.5% (Baseline 대비 -4.3%p)
- 거래 수: 14,783 → 1,834 (87.6% 감소)

**해석:**
- 구현된 유동성 스윕 감지가 실제 유동성 수집을 정확히 포착하지 못함
- 오히려 승률이 하락하여 현재 구현은 부적합

### EMA 정배열/역배열

```
조건: LONG은 EMA8 > EMA21 > EMA55, SHORT은 역순
```

**결과:**
- 승률: 25.0% (Baseline 대비 **-28.7%p**)
- 거래 수: 14,783 → 7,457 (49.6% 감소)

**해석:**
- **가장 해로운 필터**
- 추세가 확인될 때는 이미 늦은 경우가 많음
- 암호화폐의 변동성 특성상 엄격한 EMA 정렬은 역효과

### FVG (Fair Value Gap)

```
조건: OB 근처에 3캔들 갭 패턴 (candle[i-2].high < candle[i].low 등) 존재
```

**결과:**
- 승률: 52.8% (Baseline 대비 -1.0%p)
- 거래 수: 14,783 → 1,671 (88.7% 감소)

**해석:**
- BOS와 유사하게 승률 개선 없이 기회만 감소
- FVG 감지 임계값(0.1%) 조정 필요할 수 있음

---

## 필터 조합 분석

### 효과적인 조합 없음

**모든 필터 조합이 Baseline보다 성과가 나쁨:**

```
Baseline:     53.8% WR, +57,083% PnL
BOS + FVG:    50.6% WR, +300% PnL
All Filters:  12.5% WR, -179% PnL
```

### 상관관계 분석

| 조합 | 예상 | 실제 | 분석 |
|------|------|------|------|
| BOS + Liquidity Sweep | 시너지 기대 | 43.0% WR | **역시너지** |
| BOS + FVG | 보완 기대 | 50.6% WR | 미미한 개선 |
| All Filters | 최고 품질 | 12.5% WR | **최악의 결과** |

---

## 결론 및 권장사항

### 핵심 결론

1. **현재 SimpleTrueOB 전략이 이미 최적화되어 있음**
   - 53.8% 승률은 이미 좋은 수준
   - 추가 필터는 대부분 역효과

2. **EMA 필터는 절대 사용하지 말 것**
   - 28.7%p 승률 하락은 치명적
   - 추세 확인 필터로 부적합

3. **BOS, FVG 필터는 현재 구현으로는 효과 없음**
   - 거래 기회만 88% 이상 감소
   - 승률 개선 효과 없음

4. **Liquidity Sweep 구현 재검토 필요**
   - 현재 구현은 오히려 성과 악화
   - 더 정교한 유동성 감지 로직 필요

### 권장 사항

| 우선순위 | 조치 | 이유 |
|----------|------|------|
| 1 | **현재 전략 유지** | 이미 53.8% 승률로 양호 |
| 2 | EMA 필터 폐기 | 심각한 역효과 확인 |
| 3 | 필터 임계값 완화 테스트 | 덜 엄격한 조건으로 재테스트 |
| 4 | 유동성 스윕 로직 재설계 | Volume 기반 분석 추가 고려 |

### 향후 연구 방향

1. **ADX (추세 강도) 필터 테스트**
   - EMA 정렬 대신 추세 강도로 필터링

2. **RSI 과매수/과매도 필터 테스트**
   - 극단적 RSI에서만 진입 제한

3. **Volume Profile 분석**
   - 고거래량 영역에서의 OB만 선별

4. **타임프레임 최적화**
   - 15분봉 vs 5분봉 비교 분석

---

## 데이터 파일

- **결과 JSON**: `/backtest-results/filter-validation/filter-validation-2026-01-12T04-20-33.json`
- **분석 보고서**: 현재 문서

---

*생성일: 2026-01-12*
*테스트 환경: Node.js + ts-node*
*데이터 소스: data.binance.vision*
